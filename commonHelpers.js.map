{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst key = \"42527051-ab9ea8069b5c425aa0269f2a2\";\r\n\r\nexport const params = {\r\n  image_type: 'photo',\r\n  orientation: 'horizontal',\r\n  safesearch: true\r\n}\r\n\r\nconst INSTANCE =  axios.create({\r\n  baseURL: `https://pixabay.com/api`,\r\n  headers: {'Accept': 'application/json'}\r\n});\r\n\r\nexport const images = {\r\n  async getImages(inputResult, page) {\r\n    const response = await INSTANCE.get(`?key=${key}&q=${encodeURIComponent(inputResult)}`, {params: params});\r\n    return response.data;\r\n  }\r\n}\r\n","import SimpleLightbox from \"simplelightbox\";\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\n\r\nconst gallery = document.querySelector('.gallery');\r\n\r\nexport const createHTML = (images) => {\r\n  const lightbox = new SimpleLightbox('.gallery .gallery-link', {\r\n    className: 'gallery-link',\r\n    closeText: ['<i class=\"fa fa-times\">&#10006;</i>'],\r\n    navText: ['<i class=\"fa fa-angle-left\">&lt;</i>','<i class=\"fa fa-angle-right\">&gt;</i>'],\r\n    captionsData: 'alt',\r\n    captionDelay: 250\r\n  });\r\n\r\n  // gallery.innerHTML = \"\";\r\n\r\n  const galleryImages = images.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => {\r\n    return `<a class=\"gallery-link\" href=\"${largeImageURL}\">\r\n                          <img\r\n                            class=\"gallery-image\"\r\n                            src=\"${webformatURL}\"\r\n                            alt=\"${tags}\"\r\n                          />\r\n                          <figcaption class=\"gallery__figcaption\">\r\n                             <div class=\"gallery__caption\">Likes: <span>${likes}</span></div>\r\n                             <div class=\"gallery__caption\">Views: <span>${views}</span></div>\r\n                             <div class=\"gallery__caption\">Comments: <span>${comments}</span></div>\r\n                             <div class=\"gallery__caption\">Downloads: <span>${downloads}</span></div>\r\n                          </figcaption>\r\n                        </a>`;\r\n  }).join(\"\");\r\n\r\n  gallery.insertAdjacentHTML(\"beforeend\", galleryImages);\r\n  lightbox.refresh();\r\n}","import { images } from './js/pixabay-api.js';\r\nimport { createHTML } from './js/render-function.js';\r\nimport { params } from './js/pixabay-api.js';\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\n\r\nconst searchForm = document.querySelector('.form');\r\nconst loadImagesButton = document.getElementById('get-images');\r\nconst loader = document.querySelector('.loader');\r\n\r\nconst per_page = 15;\r\n\r\nconst getImages = () => {\r\n  const searchInput = document.querySelector(\"[name='search']\");\r\n\r\n  if (searchInput.value.trim() !== '') {\r\n    loader.style.display = 'block';\r\n\r\n    images.getImages(searchInput.value.trim())\r\n      .then((res) => {\r\n\r\n        const totalPages = Math.ceil(res.totalHits / per_page);\r\n\r\n        if(params.page >= totalPages) {\r\n          loadImagesButton.style.display = 'none';\r\n          createHTML(res.hits);\r\n          if (parseInt(res.totalHits) <= 0){\r\n            throw new Error('Sorry, there are no images matching your search query. Please try again!');\r\n          }\r\n          throw new Error('We are sorry, but you\\'ve reached the end of search results.')\r\n        }\r\n        loadImagesButton.style.display = 'inline-block';\r\n        createHTML(res.hits);\r\n        loader.style.display = 'none';\r\n      })\r\n      .catch((error)=> {\r\n        loader.style.display = 'none';\r\n        console.error(error.message);\r\n        resultError(error.message);\r\n      });\r\n  }else {\r\n    loader.style.display = 'none';\r\n    resultError('The field cannot be empty');\r\n  }\r\n}\r\nsearchForm.addEventListener(\"submit\", (e) => {\r\n  e.preventDefault();\r\n\r\n  params.per_page = per_page;\r\n  params.page = 1;\r\n\r\n  document.querySelector('.gallery').innerHTML = '';\r\n\r\n  getImages();\r\n});\r\n\r\nloadImagesButton.addEventListener(\"click\", () => {\r\n  params.per_page = per_page;\r\n  params.page++;\r\n\r\n  const lastElement = document.querySelector(\".gallery-link\");\r\n  let rect = lastElement.getBoundingClientRect();\r\n\r\n  getImages();\r\n\r\n  setTimeout(() => {\r\n    window.scrollBy({\r\n      // top: rect.height*2,\r\n      top: 850,\r\n      behavior: 'smooth'\r\n    })\r\n  }, \"500\");\r\n\r\n})\r\n\r\n//Loading when scrolling\r\n// window.addEventListener('scroll', () => {\r\n//   if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {\r\n//     params.per_page = per_page;\r\n//     params.page++;\r\n//     getImages();\r\n//   }\r\n// })\r\n\r\nconst resultError = (errorMsg) => {\r\n  iziToast.error({\r\n    message: errorMsg,\r\n    position: 'topRight',\r\n    timeout: 5000\r\n  })\r\n}"],"names":["key","params","INSTANCE","axios","images","inputResult","page","gallery","createHTML","lightbox","SimpleLightbox","galleryImages","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchForm","loadImagesButton","loader","per_page","getImages","searchInput","res","totalPages","error","resultError","e","errorMsg","iziToast"],"mappings":"owBAEA,MAAMA,EAAM,qCAECC,EAAS,CACpB,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EAEMC,EAAYC,EAAM,OAAO,CAC7B,QAAS,0BACT,QAAS,CAAC,OAAU,kBAAkB,CACxC,CAAC,EAEYC,EAAS,CACpB,MAAM,UAAUC,EAAaC,EAAM,CAEjC,OADiB,MAAMJ,EAAS,IAAI,QAAQF,CAAG,MAAM,mBAAmBK,CAAW,CAAC,GAAI,CAAC,OAAQJ,CAAM,CAAC,GACxF,IACjB,CACH,ECjBMM,EAAU,SAAS,cAAc,UAAU,EAEpCC,EAAcJ,GAAW,CACpC,MAAMK,EAAW,IAAIC,EAAe,yBAA0B,CAC5D,UAAW,eACX,UAAW,CAAC,qCAAqC,EACjD,QAAS,CAAC,uCAAuC,uCAAuC,EACxF,aAAc,MACd,aAAc,GAClB,CAAG,EAIKC,EAAgBP,EAAO,IAAI,CAAC,CAAC,aAAAQ,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAC9F,iCAAiCL,CAAa;AAAA;AAAA;AAAA,mCAGtBD,CAAY;AAAA,mCACZE,CAAI;AAAA;AAAA;AAAA,0EAGmCC,CAAK;AAAA,0EACLC,CAAK;AAAA,6EACFC,CAAQ;AAAA,8EACPC,CAAS;AAAA;AAAA,6BAGpF,EAAE,KAAK,EAAE,EAEVX,EAAQ,mBAAmB,YAAaI,CAAa,EACrDF,EAAS,QAAO,CAClB,EC5BMU,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAmB,SAAS,eAAe,YAAY,EACvDC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAW,GAEXC,EAAY,IAAM,CACtB,MAAMC,EAAc,SAAS,cAAc,iBAAiB,EAExDA,EAAY,MAAM,KAAI,IAAO,IAC/BH,EAAO,MAAM,QAAU,QAEvBjB,EAAO,UAAUoB,EAAY,MAAM,KAAI,CAAE,EACtC,KAAMC,GAAQ,CAEb,MAAMC,EAAa,KAAK,KAAKD,EAAI,UAAYH,CAAQ,EAErD,GAAGrB,EAAO,MAAQyB,EAGhB,MAFAN,EAAiB,MAAM,QAAU,OACjCZ,EAAWiB,EAAI,IAAI,EACf,SAASA,EAAI,SAAS,GAAK,EACvB,IAAI,MAAM,0EAA0E,EAEtF,IAAI,MAAM,6DAA8D,EAEhFL,EAAiB,MAAM,QAAU,eACjCZ,EAAWiB,EAAI,IAAI,EACnBJ,EAAO,MAAM,QAAU,MAC/B,CAAO,EACA,MAAOM,GAAS,CACfN,EAAO,MAAM,QAAU,OACvB,QAAQ,MAAMM,EAAM,OAAO,EAC3BC,EAAYD,EAAM,OAAO,CACjC,CAAO,IAEHN,EAAO,MAAM,QAAU,OACvBO,EAAY,2BAA2B,EAE3C,EACAT,EAAW,iBAAiB,SAAWU,GAAM,CAC3CA,EAAE,eAAc,EAEhB5B,EAAO,SAAWqB,EAClBrB,EAAO,KAAO,EAEd,SAAS,cAAc,UAAU,EAAE,UAAY,GAE/CsB,GACF,CAAC,EAEDH,EAAiB,iBAAiB,QAAS,IAAM,CAC/CnB,EAAO,SAAWqB,EAClBrB,EAAO,OAEa,SAAS,cAAc,eAAe,EACnC,sBAAwB,EAE/CsB,IAEA,WAAW,IAAM,CACf,OAAO,SAAS,CAEd,IAAK,IACL,SAAU,QAChB,CAAK,CACF,EAAE,KAAK,CAEV,CAAC,EAWD,MAAMK,EAAeE,GAAa,CAChCC,EAAS,MAAM,CACb,QAASD,EACT,SAAU,WACV,QAAS,GACb,CAAG,CACH"}